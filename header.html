<!DOCTYPE html>
<html lang="en">
<head>
    <!-- All CSS -->
    <link rel="stylesheet" href="css/all.min.css">
    <link rel="stylesheet" href="css/slick.css">
    <link rel="stylesheet" href="css/meanmenu.css">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/preloader.css">
    <link rel="stylesheet" href="css/animate.min.css" />
    <link rel="stylesheet" href="css/default.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <!-- =========================== 1. Menu Section =========================================== -->
    <div class="menu-header d-flex align-items-center">
        <div class="container">
            <div class="row justify-content-between">
                <div class="col-2 d-flex align-items-center">
                    <a href="index.html"><img class="logo" src="images/logo/site-logo/logo.png" alt="change"></a>
                </div>
                <div class="col-10 d-flex align-items-center">
                    <nav id="mobile-menu" class="menu-area d-lg-flex align-items-center ml-auto">
                        <ul>
                            <li class="current-menu-item">
                                <a href="index.html">Home</a>
                            </li>
                            <li>
                                <a href="about.html">About</a>
                            </li>
                            <li>
                                <a href="services.html">Services</a>
                            </li>
                            <li>
                                <a href="digitizing.html">Digitizing</a>
                            </li>
                            <li>
                                <a href="vector.html">Vector Artwork</a>
                            </li>
                            <li>
                                <a href="faq.html">Faq</a>
                            </li>
                            <li>
                                <a href="contact.html">Contact Us</a>
                            </li>
                        </ul>
                    </nav>
                    <div class="mobile-menu"></div>
                    <a href="#" class="large-blue-button menu-button" data-toggle="modal" data-target="#quoteModal"
                        data-whatever="@mdo">Get a quote</a>
                </div>
            </div>
        </div>
    </div>

    <!-- =========================== 2. Quote Modal Pop-up =========================================== -->
    <div class="modal fade pr-0" id="quoteModal" role="dialog" aria-labelledby="quoteModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-slideout" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="quoteModalLabel">CHANGE! - Request Form</h5>
                    <button type="button" class="close" id="quoteModalClose" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body ">
                    <form id="quote-request-form">
                        <div class="form-group">
                            <label for="user" class="form-label">
                                Name
                            </label>
                            <input type="text" name="name" id="name" required class="form-control">
                            <small id="usercheck" class="form-text invalid-feedback">
                                Name is missing
                            </small>
                        </div>

                        <div class="form-group">
                            <label for="user">
                                Email
                            </label>
                            <input type="email" name="mail" id="mail" required class="form-control">
                            <small id="emailvalid" class="form-text invalid-feedback">
                                Email address is not provided
                            </small>
                        </div>

                        <div class="form-group">
                            <label for="mobile_num" class="col-form-label">Contact Number</label>
                            <input type="text" class="form-control " id="contact" name="contact" required>
                            <small id="mobilevalid" class="form-text invalid-feedback">
                                Your contact number is missing
                            </small>
                        </div>

                        <div class="form-group">
                            <label for="service_type" class="col-form-label">Service Type</label>
                            <div name="radDiv" id="radDiv">
                                <div class="row pb-3">
                                    <div class="col-md-6 py-2">
                                        <div class="card1">
                                            <input type="radio" name="service-type" id="service-type" checked
                                                value="VECTOR_ART_WORK">
                                            <label for="card1">
                                                <h5>VECTOR ARTWORK</h5>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6 py-2">
                                        <div class="card1">
                                            <input type="radio" name="service-type" id="service-type"
                                                value="DIGITIZING">
                                            <label for="card2">
                                                <h5>DIGITIZING</h5>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="file" class="col-form-label">File Upload</label>
                            <div name="fileUpload" id="fileUpload">
                                <div class="input-group mb-3">
                                    <div class="custom-file">
                                        <input type="file" class="custom-file-input " id="files" multiple="multiple"
                                            accept="image/png, image/gif, image/jpeg" />
                                        <label class="custom-file-label" id="custom-file-label" for="files">Choose
                                            file(s)</label>
                                        <small id="filevalid" class="form-text invalid-feedback">
                                            Unsupported file format
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="message" class="col-form-label ">Give us more details about your
                                requirement</label>
                            <textarea class="form-control " id="memo" name="memo"></textarea>
                            <small id="messagevalid" class="form-text invalid-feedback">
                                Supports 100 aphanumeric characters, avoid special symbols
                            </small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer pr-5">

                    <button type="submit" id="submitbtn" class="large-blue-button border-0">PLACE QUOTE</button>
                </div>
            </div>
        </div>
    </div>

    <!-- =========================== 3. Success Modal ===========================================-->
    <div class="modal fade" id="success" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-slideout" role="document">
            <div class="modal-content" style="border:none;border-radius: 5px;">
                <div class="" style="background: #F9AD19;
                border-top-left-radius: 5px;
                border-top-right-radius: 5px;">
                    <h4 class="modal-title text-center"><img
                            src="./images/shapes/success.png"
                            alt=""></h4>
                </div>
                <div class="modal-body">
                    <p style="text-align:center;color:#F9AD19;font-size:24px;font-weight:500;">Bravo! Quote placed
                        Successful!</p>
                    <p style="color:#555555;">This quotation request will be validated by
                        our client service team and we will get back to you over mail with in<strong
                            style="font-weight:500;font-size:15px;color: #F9AD19;"> 30 minutes</strong></p>
                </div>
                <div class="modal-footer">
                    <button type="button" id="closeButton" class="large-blue-button border-0" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- =========================== 4. Failure Modal ===========================================-->
    <div class="modal fade" id="fail" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-slideout" role="document">
            <div class="modal-content" style="border:none;border-radius: 5px;">
                <div class="" style="background: #4F4F4F;
                border-top-left-radius: 5px;
                border-top-right-radius: 5px;">
                    <h4 class="modal-title text-center"><img
                            src="./images/shapes/fail.png"
                            alt=""></h4>
                </div>
                <div class="modal-body">
                    <p style="text-align:center;color:#d75a4a;font-size:24px;font-weight:500;">Sorry! Unable to process
                        your
                        request at this time!</p>
                    <p style="color:#555555;">We regret the inconvience caused, please feel free to email your quotation
                        request to our email system,
                        Our client serivce team (order@changeartwork.com) will get back to you with in<strong
                            style="font-weight:500;font-size:15px;color: #d75a4a;"> 30 minutes</strong></p>
                </div>
                <div class="modal-footer">
                    <button type="button" style="background-color: #4F4F4F" id="closeButton" class="large-blue-button border-0" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    <!-- =========================== 4.Handling events and actions ============================-->
    <script>
        $(document).ready(function () {
            // Validate Username
            $("#usercheck").hide();
            let usernameError = true;
            $("#name").keyup(function () {
                validateUsername();
            });

            // Validate Email
            $("#emailvalid").hide();
            let emaileError = true;
            $("#mail").keyup(function () {
                validateEmail();
            });

            // Validate Contact
            $("#mobilevalid").hide();
            let contactError = true;
            $("#contact").keyup(function () {
                validateContact();
            });

            // Validate Details
            $("#messagevalid").hide();
            let messageError = true;
            $("#memo").keyup(function () {
                validateMessage();
            });

            // Update file placeholder with attachment count
            $('#files').on('change', function () {
                fileCount = this.files.length;
                $(this).next('.custom-file-label').html(fileCount + ' File(s) Selected');
            })

            //Submit button
            $("#submitbtn").click(function () {
                validateUsername();
                validateEmail();
                validateContact();
                validateMessage();
                if (
                    usernameError == true &&
                    emailError == true &&
                    contactError == true &&
                    messageError == true
                ) {
                    var selectedVal = "VECTOR_ART_WORK";
                    var selected = $("#radDiv input[type='radio']:checked");
                    if (selected.length > 0) {
                        selectedVal = selected.val();
                    }
                    const quoteForm = document.getElementById('quote-request-form');
                    const input = document.querySelector("#fileUpload input[type='file']")
                    var quoteData = new FormData(quoteForm);
                    quoteData.append('service_type', selectedVal);
                    for (const file of input.files) {
                        quoteData.append('files', file)
                    }
                    const options = {
                        method: 'POST',
                        body: quoteData,
                    };

                    fetch('http://dev.changeartwork.com/v1/api/quote/create', options)
                        .then(redirect)
                } else {
                    alert("Validation error, check the inputs provided.")
                }
            });

            // Rest quote modal on close
            $('#quoteModal').on('hidden.bs.modal', function () {
                $(this).find('#quote-request-form').trigger('reset');
                const file = document.querySelector("#fileUpload input[type='file']");
                file.value = '';
                $("#custom-file-label").html("Choose file(s)");
            })

            function redirect(response) {
                if (response.status == 201) {
                    switchModals("#quoteModal","#success")
                } else {
                    switchModals("#quoteModal","#fail")
                }
            }

            //Hide the fromModal and open toModal
            function switchModals(fromModal, toModal) {
                $(fromModal).on('hidden.bs.modal', function (e) {
                    e.preventDefault();
                    $(toModal).modal('show');
                    $(fromModal).off();
                });
                $(fromModal).modal('hide');
            }

            function validateUsername() {
                let usernameValue = $("#name").val();
                if (usernameValue.length == "") {
                    $("#usercheck").show();
                    usernameError = false;
                    return false;
                } else if (usernameValue.length < 3 || usernameValue.length > 30) {
                    $("#usercheck").show();
                    $("#usercheck").html("Length of name must be between 3 and 30");
                    usernameError = false;
                    return false;
                } else {
                    $("#usercheck").hide();
                    usernameError = true;
                }
            }


            function validateEmail() {
                let emailValue = $("#mail").val();
                let regex = /^([_\-\.0-9a-zA-Z]+)@([_\-\.0-9a-zA-Z]+)\.([a-zA-Z]){2,7}$/;
                if (emailValue.length == "") {
                    $("#emailvalid").show();
                    emailError = false;
                    return false;
                } else if (!(regex.test(emailValue))) {
                    $("#emailvalid").show();
                    $("#emailvalid").html("Invalid email address, Please check");
                    emailError = false;
                    return false;
                } else {
                    $("#emailvalid").hide();
                    emailError = true;
                }
            }

            function validateContact() {
                let contactValue = $("#contact").val();
                let regex = /((?:\+|00)[17](?: |\-)?|(?:\+|00)[1-9]\d{0,2}(?: |\-)?|(?:\+|00)1\-\d{3}(?: |\-)?)?(0\d|\([0-9]{3}\)|[1-9]{0,3})(?:((?: |\-)[0-9]{2}){4}|((?:[0-9]{2}){4})|((?: |\-)[0-9]{3}(?: |\-)[0-9]{4})|([0-9]{7}))/;
                if (contactValue.length == "" || contactValue.length < 10 || contactValue.is) {
                    $("#mobilevalid").show();
                    mobileError = false;
                    return false;
                } else if (!(regex.test(contactValue))) {
                    $("#mobilevalid").show();
                    $("#mobilevalid").html("Invalid contact number, Please check");
                    mobileError = false;
                    return false;
                } else {
                    $("#mobilevalid").hide();
                    mobileError = true;
                }
            }

            function validateMessage() {
                let messageValue = $("#memo").val();
                let regexPattern = /^[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/;
                if (messageValue.length == "" || messageValue.length > 100) {
                    $("#messagevalid").show();
                    messageError = false;
                    return false;
                } else if (messageValue.match(regexPattern)) {
                    $("#messagevalid").show();
                    $("#messagevalid").html("Special characters not allowed, Please check");
                    messageError = false;
                    return false;
                } else {
                    $("#messagevalid").hide();
                    messageError = true;
                }
            }
        })
    </script>
    <script src="js/main.js"></script>
</body>
</html>